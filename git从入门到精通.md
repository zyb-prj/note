# 第1章 git入门

## 1.1 Git概述

### 1.1.1 什么是Git

​		简单的说，Git就像玩游戏的时候可以存储进度一样。例如，为了避免打头目输了而损失装备，或者打到头目却没有掉落期望的珍贵装备，可以在每次去打头目之前都记录一下，以便在发生状况的时候回到旧进度，再挑战一次。

### 1.1.2 为什么要学习Git

​		"Ctrl c + Ctrl v"是 yyds，重更创建一个文件夹复制一个副本就可以保存文件，一顿操作之后，可以根据加一个README文件而进行版本的掌控，更迭，版本之间的差异等等。作为一个代码工程，有大量的文件需要修改，而且在产品生命周期结束之前绝对是一直在修改。那么应对如此庞大的工程，每天进行copy工作就需要公司招聘大量的"Ctrl cv"工程师以及购买大量的服务器和场地；同时如果某个目录是和其他人共享的，而文件被其它人覆盖了，该怎么办？这些问题都令老板绝望。

​		如果你在乎这些问题的答案，那么使用“版本控制系统”就是一个很不多的选择。通过这样的系统，可以清楚的记录每个文件是谁在什么时候加进来的、什么时候被修改或删除的。Git就是这样一种版本控制系统，也是当前业界最流行的版本控制系统。

​		无论做任何工作，如果有Git帮你保留这些历史记录和证据，那么发生意外状况的时候你就能知道是从什么时候开始有问题的，以及该找谁负责，再也不用自己“背黑锅”了。

## 1.2 Git与其他版本控制系统的差异

### 1.2.1 Git的优点

- 免费、开源

  ​		2005年，为了管理 Linux 内核程序源码，Linux 内核的作者 Linus Trovalds 仅用了10天时间就开发出Git。粗略算来，至今已有十几年的历史了。免费，源码开源（当然Git的源码也是用Git做版本控制的）。

- 速度快、文件体积小

  ​		如果使用前面的“ctrl cv”大法，那么这些备份的目录会占用大量的空间。其它的版本控制系统大多是记录每个版本之间的差异，而不是完整的备份整个目录，所以整个目录的大小不会快速的增加。

  ​		Git 的特别之处在于，它并不是记录版本之间的差异，而是记录文件内容的“快照(snapshot)”，可以非常快速的切换版本。快照在后面的笔记中详细说明。

- 分布式系统

  ​		其它的版本控制系统都需要一个专用的服务器，所有的更新都要与这个太服务器沟通。一旦坏了，大家都凉凉。

  ​		Git是一款分布式版本控制系统，虽然通常也会有共同的服务器，但即使在没有服务器或在没有网络的环境下，仍然可以使用Git进行版控，待服务器恢复正常运行或移到有网络的环境后再进行同步，不会受影响。事实上，在使用Git的过程中，大多数的Git操作在计算机本机上就可以完成。

### 1.2.2 Git的缺点

​		易学难精，指令非常多且部分较复杂。根据二八法则，20% 的指令足以应对 80% 的工作。

​		除了 Terminal，还有很多实用的图形界面工具，让使用者不用输入复杂的指令就可以享用 Git 的强大功能。Terminal 可以让操作者及其清晰的掌握原理并执行操作，SourceTree 等图形工具可以更方便的执行操作。

## 1.3 常见问题

1. 我是设计师，也可以使用Git么？

   ​		基本上 Git 只关心为念的“内容”，所以只要是文件，都可以使用 Git 来滚利。设计生成的一些文件，虽然Git也可以管理，但因为这些文件（二进制文件）不像常规文件一样可以逐行查看，也就无法那么精确的知道什么人在什么时候修改了那些内容。但总体来说还是可以帮上忙的，至少当不小心被覆盖或删除的时候，还可以找回旧版本的文件。

2. Git就是 GitHub 吗？

   ​		这是很多新手容易有的误会，以为 Git 就是 GitHub（或者认为 GitHub 就是 Git），甚至有的公司在招聘启事上明确写着会使用"GitHub"。事实上，Git是一个版本控制软件，而 GitHub 是一个商业网站，其本体是一个商业服务器，但这个网站上的影城程序可以让大家通过web操作来完成一些原本需要一些复杂的Git指令才能做到的事。







# 第2章 设置git

## 2.1 用户设置

​		1st：进入需要使用git进行版本掌控的工程目录

​		2nd：在目录中右键点击Git Bash here

​		3rd：输入下面两行指令

​				`$ git config --global user.name "zyb"`

​				`$ git config --global user.email "zyb_2457@outlook.com"`

​		4th：输入完成后，输入下面指令检查一下当前位置

​				`$ git config --list`

## 2.2 给每个项目设置不同的作者

​		我注意到，前面的设置加了 --global 参数，其含义是要进行全局设置。但偶尔也会遇到一些特殊状况，例如针对特定的项目设置不同的作者，怎么办呢？可以在对该项目目录进行Git设置的时候，加上 --local 参数。具体命令如下：

​				`$ git config --local user,name "jpy"`

​				`$ git config --global user.email "jpy_5649@outlook.com"`

​		这样一来，在对这个项目进行操作的时候，就会使用为其特别定制的用户名及E-mail来操作。离开这个项目后的Git操作，还是会使用默认的 global 设置。

## 2.3 其它方便的设置

### 2.3.1 更换编辑器

​		一般来说，Vim是Git默认的编辑器，对于新手来说真是亚麻得。在终端机下使用Git，Vim编辑器恐怕是个绕不过去的坎。话不多说，直接看指令：

​				`$ git config --global core.editor emacs`

​		上述指令就可以把默认的Vim编辑器直接换成Emacs。除了Emacs之外还可以使用 Sublime Text、Atom 或 Visual Studio Code 等比较现代的文字编辑器。只需要先搜索一下怎样从终端机启动这些应用程式，然后就可以用同样的方法把Vim换掉了。当然也可以使用 SourceTree 等 UI 的 Git 工具。

### 2.3.2 设置缩写

#### 2.3.2.1 设置精简指令（看个人喜好）

​		有时候有些指令的单词比较长（看个人喜好），我们可以在 Git 中设置一些缩写。直接看下面命令，这条指令设置完毕后，只需要在终端输入 git co 命令，就可以实现与输入 git checkout 命令一样的效果。

​				`$ git config --global alias.co checkout`

#### 2.3.2.2 设置简洁参数

​		每次在查看log时，为了看到比较精简的信息，都要输入 git log --oneline --graph 这么长的命令，而改用 Alias 设置，以后只需输入 git l 命令，就可以实现与原来的 --oneline --graph 命令一样的效果了。指令如下：

​				`$ git config --global alias.l "log --oneline --graph"`







# 第3章 使用Git

## 3.1 新增、初始Repository

### 3.1.1 全新开始

​		在桌面右键选择 Git Bash here，打开终端，跳转到指定目录，创建工程文件夹初始化目录。终端命令如下：

​				`$ mkdir git_prj`

​				`$ cd git_prj`

​				`$ git init`

**注意：**

​		git init命令会在zyb工程目录中创建一个 .git 目录，整个 Git 的精华都集中在这个目录中。后续的笔记将详细说明。

​		以小数点开头的目录或文件名称（如 .git）在一些作业系统中默认是隐藏的，可能需要开启检视隐藏文档之类的设置才能看到。

### 3.1.2 使用Git版控已经存在的工程

​		直接到需要版控的工程，右键 Git Bash here，直接执行init命令：

​				`$ git init`

### 3.1.3 目录不想被Git控制

​		首先使用对应的操作系统设置可以查看隐藏的文件。然后在工程目录中直接删除 .git 文件夹即可。如此Git就对这个目录失去了控制权。

​		整个项目目录中，无论哪个文件或目录被删除了都能找回来，但如果 .git 目录被删除了就无法找回了。

## 3.2 把文件交给Git管控

### 3.2.1 创建文件及基本操作

- 情景说明

  ​		创建工程文件，即需要 Git 控制的文件（理论上来讲只要是可以转化为二进制的文件均可）。此时，首先要经常使用 git status 时刻查看状态，有什么更改或者变化。

- 具体步骤

  ​		某一时刻，你添加了一波代码，或者修改了某个 bug。马上要随时查看状态。添加一个文件（以本文件 git.md 为例，本笔记均用此案例）。指令如下：

  ​				`$ git status`

  ​		要有经常使用 git status 的习惯。如果文件有改动，会提示你哪个文件发生了改动（红色显示），会提示文件此时的状态是 Untracked files，而且还会有下一步操作的提示，现象如下：

  ​				![](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211120163116411.png)	

### 3.2.2 把文件交给Git

#### 3.2.2.1 将文件放至暂存区

​		1st：将文件添加至 Git 暂存区（什么叫暂存区会在下一节记录），相关命令如下：	

```
    	$ git add <file_name>        # <>在实际操作中不需要
    	$ git add *.zyb              # 使用此条命令可将所有的.zyb文件一次性全部提交至暂存区
    	$ git add --all              # 使用此条命令可将所有的文件一次性全部放入暂存区
    	$ git add .                  # 与--all参数的功能一致，但是Git1.x版本不支持操作删除文件
```

​		2nd：如果按照上述对应指令操作则不会有任何现象

​        3rd：使用 git status 查看状态，如果添加成功则会有绿色代码行提示，并且此时文件的状态为 new file，如下图所示：

​												![image-20211120165410491](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211120165410491.png)

​		4th：不管是修改了原文件，增加了新文件，删除了某个文件，都需要执行 git status 时刻查看 git 状态并使用 git add 将工程改动放入暂存区。

#### 3.2.2.2 将暂存区中的文件放置存储库里存档

​		如果仅是通过git add命令把异动放入暂存区，则还不算是完成整个流程，注意要完成commit命令才算是完成整个流程。如果想让暂存区内容永久保存下来，就要使用相关命令将其放入存储空间。指令如下：

​				`$ git commit -m "xxx"                   #-m参数+引号里的自定义内容用于说明本次commit的操作内容 `

​				`$ git commit                           #不加任何参数，会弹出窗口自行输入commit的操作内容`

**注意：**

- 到底commit了什么东西

  ​		首先要明确一个概念：Git 的每次 Commit 都只会处理暂存区的内容。也就是说，在执行 git commit 命令时，那些还没有放入暂存区的异动不会被 Commit 到存储区中。

- commit 时输入的信息十分重要。在 Commit 时，如果没有输入这个信息，Git 默认是不会完成 Commit 的。它主要的目的就是告诉你自己及其他人“这次的改动做了什么”。建议如下：

  - 尽量不要使用太过情绪化的字眼，以避免不惜要的问题

  - 英文、中文均可，重点是要简单、清除

  - 尽量不要使用类似 bug fixd 这样模糊的描述，因为没有人知道你修正了什么 bug。但如果搭配其他的系统使用，则可以使用类似 #34 bug fixed 这样的描述，因为这样就可以知道这次的 Commit 修正了第 34 号 bug

- commit时不带参数时弹出的奇怪窗口

  ​		在执行 git commit 时，如果没有在这串命令后加上信息参数，默认会弹出一个黑色的画面，就是 vim，是用来让你输入信息的，即本次 commit 你用来干嘛。

- commit时不一定要加备注内容，只需要加上  --allow-empty 参数即可

## 3.3 工作区、暂存区与存储库

### 3.3.1 概念介绍

​		上一节知识介绍了可以使用 git add 命令把文件加入暂存区，然后再使用 git commit 命令把暂存区的内容移交存储库。在 Git 中，针对工作目录、暂存区以及存储库 3 个主要区域，可以通过不同的 Git 命令，把文件移往不同的区域，如图所示：

​																	<img src="https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/clip_image001.png" style="zoom:67%;" />			

- git add 命令可以把文件从工作目录移至暂存区（或下标）
- git commit 命令可以把暂存区内的文件内容移至存储库

**注意：**

​		要执行 commit 命令，也就是将文件存放到 Respository 区域，才算完成整个流程。基本上只要记得这三个区域怎样操作，Git 在本机端的操作就可搞定。

### 3.3.2 二段式操作

​		所谓二段式操作就是，看如下指令：

​				`$ git add`	&	`$ git commit`

​		先 add 再 commit，这样可以避免出现 Commit 碎片化的问题。建议多次 add 然后一次性commit，这样在 Code Review 的时候，比较规律的 Commit 可以一次性看到比较完整的内容，而不需要一个一个 Commit 慢慢看。大大提升了效率。

​		关于何时 commit 的问题，这个问题没有标准答案，可以将很多文件都改动好后一起 Commit，也可以只改动一个字就 Commit。常见的 Commit 时间点如下：

​		(1) 完成一个任务时：大到完成一整个电子商务的金流系统，小到只加了一个页面甚至只改了几个字，都算是完成了一个任务。

​		(2) 下班的时候：虽然可能还没有完全完成任务，但至少先 Commit 今天的进度，除了备份之外，也让公司知道你今天一天一直在努力工作。

​		(3) 想要 Commit 的时候：只要想 Commit，就可以 Commit。

## 3.4 查看commit记录

### 3.4.1 查看记录的方法

#### 3.4.1.1 详细说明

​		查看记录主要是查看之前 Commit 的记录。指令如下：

​				`$ git log`

​		执行效果如下：

​				![image-20211120221619796](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211120221619796.png)

​		越新的信息会显示在越上面。从上面的信息中我们大致可以看出如下内容：commit 的作者是谁？什么时候 commit 的？每次的 commit 大致做了什么事？

#### 3.4.2.2 获取精简记录

​		在使用 git log 命令时，如果加上额外参数，可以看到不一样的输出格式。下面指令可以打印精简信息，可以一次性看清更多的 commit：

​				`$ git log --oneline --graph`

### 3.4.2 根据关键信息打印记录

- 根据提交 commit 作者找到对应 commit

​				`$ git log --oneline  --author="jumping"                    # 查看jumping的commit`

- ​			Commit 的作者是谁
- ​    (2) 什么时候 Commit 的
- ​    (3) 每次的 Commit 大概做了什么事
- ​    (4) Commit 后面跟的乱码，暂且认为是当前次 Commit 的身份证号，我们可以凭借这个身份证号锁定对应的 Commit

- 根据 commit 关键字找到对应 commit

​				`$ git log --oneline --grep="key_value"  				   # 搜索关键字key_value找到对应commit`

- 查找某一段时间的 commit 

​				`$ git log --oneline --since="9am" --utils="12am"           # 查找早上9点至12点的commit`

### 3.4.3 查看特定文件的commit记录

​		查看单一文件记录

​				`$ git log <file_name>                       # 根据文件名查看commit记录 `

​		查看某个 commit 做了什么改动

​				`$ git log -p <file_name>                   # 查看文件fime_name的所有commit记录并附加每次修改的内容`

## 3.5 在Git中删除文件或变更文件名

### 3.5.1 删除文件

#### 3.5.1.1 直接删除

​		假设我们要删除文件 zyb，步骤如下：

​		1st：使用系统删除指令在工作区删除需要删除的文件，指令如下：

​						`$ rm zyb         # 删除文件zyb`

​		2nd：使用 git status 查看一下状态，效果如下

​				![image-20211120224548052](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211120224548052.png)

​				可以看到 zyb 的当前状态是deleted。如果确定这是你想做的，移步下一步操作				

​		3rd：将改动添加至暂存区

​				`git add <file_name>                  # 将改动的文件file_name添加至暂存区   `

​		4th：使用 git status 查看一下状态，效果如下

​				![image-20211120225002406](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211120225002406.png)

​		5th：使用 commit 将删除的改动同步至存储库

​				![image-20211120225221498](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211120225221498.png)

#### 3.5.1.2 使用Git指令删除（建议）

​		使用 Git 指令直接删除，效果相当于直接到3.5.1.1的第4步，接下来直接做第5步。指令如下：

​				`$ git rm <file_name>               # 删除文件file_name，且效果直接到到暂存区`

### 3.5.2 git删除文件，但工作区不做删除

​		不论是执行 rm 命令，还是执行 git rm 命令，都会真的把这个文件从工作目录中删除。如果不是真的想删除这个文件，只是不想让这个文件被 git 控制了，可以加上 --cache 参数。指令如下：

​				`$ git rm <file_name> --cached`

​		这样就不会真正删除文件，此时此文件的状态变为 Untracked files

### 3.5.3 变更文件名

#### 3.5.3.1 直接改名

​		变更文件名也是一种改动，指令如下：
​    			`$ mv <file_name_old> <file_name_new>    # 将file_name_old改为file_name_new`

​		上述指令将 README 改为 readme，实际做了两个操作，即删除源文件+增加新文件，之后查看状态，然后使用二段式方案将其上传至 git。在使用 git add 的时候，需要加上 --all 参数，原因是由于 mv 命令有上述讲的两个操作，因此改动了两次，然后进行 commit。

#### 3.5.3.2 请Git帮你改名

​		指令如下：

​				`$ git mv <file_name_old> <file_name_new>`

​		此时文件的状态为 renamed，且状态在暂存区；下一步就需要 git commit

## 3.6 修改commit记录

### 3.6.1 开发日常

​		程序员心情不太好，不小心在 commit 信息中发了几句牢骚，当程序员恢复理智后该如何处理？或者程序员提交的 commit 信息有误，需要进行修改？要改动 commit 记录，有如下四种方式：

- 把工程根目录的 .git 目录删除（不建议）

- 使用 git rebase 命令来改动历史记录（删除更早版本的 commit）
- 先把 commit 用 git reset 命令删除，整理后再重新 commit
- 重新执行 git commit 指令并使用 --amend 参数用来改动最后一次 commit （强烈推荐）

### 3.6.2 使用--amend参数进行commit

​		1st：查看 commit 信息，即查看对应 commit ID，对应指令如下

​				`$ git log --oneline`

​		2nd：使用 --amend 参数重新进行 commit，指令如下

​				`$ git commit --amend`

​		3rd：修改对应 commit 信息

​				`$ git commit --amend -m "commit信息"            # 加 -m 参数，则直接修改对应 commit 信息`

​				`$ git commit --amend						   # commit 后不加 -m 参数的话就需要在自动跳出的 vim 编辑器中操作`

### 3.6.3 修改说明

​		虽然只是修改记录的信息，其它的实质性内容没有做出修改，但对于 git 来讲，因为commit 的内容改变了，所以 git 会重新计算并产生一个新的 commit 对象，这其实是一次全新的commit（只是看起来不像commit）。

### 3.6.4 改动更早的commit记录

​		可以改动更早的记录，只是要使用 rebase 命令来处理，因为 --amend 参数只能处理最后一次的 commit。关于 rebase 命令的使用方式，可在后续章节详细说明。

​		注意，虽然这只是改动信息，但不管怎么说，就是发生了一次历史记录。所以尽量不要在已经 push 出去后再改动，否则可能会给其他人造成困扰。

## 3.7 追加文件至最近一次commit

### 3.7.1 开发日常

​		刚刚完成的 commit，但发现有一个文件忘了加上，由不想为了这个文件重新再发一次 commit…...此种情况虽然为了这个文件再加送一次 commit 也不是不行，但我有 commit 的洁癖，希望每个 commit 都不要有废话，做到其应该做的事情就好。所以，如果不想再发一次 commit，就把这个文件并入最近一次的 commit。有如下两种方式：

- 使用 git reset 命令把最后一次的 commit 删除，加入新文件后再重新 commit（第13借介绍）

- 使用 --amend 参数进行 commit

### 3.7.2 使用--amend参数实现文件追加至最后一次commit

​		步骤如下：

​				1st：查看状态

​						`$ git status                # 查看状态发现Untracked的文件`

​				2nd：将 Untracked 的文件加入暂存区

​						`$ git add <file_name>`

​				3rd：追加文件至最近一次 Commit

​						`$ git commit --amend --no-edit`

## 3.8 新增空目录处理

### 3.8.1 情景模式

​		刚刚新增一个目录，使用 git status 却发现无新增文件夹，此目录好像无法被加到 Git 中。有一点要记住，就是 Git 在计算、产生对象时，是根据“文件的内容”进行计算的，所以只是新增一个目录的话，Git 是无法处理它的。注意！！！空目录无法提交。

### 3.8.2 解决方式

​		上述问题的解决方式很简单，只需要在此文件夹中随便创建一个文件接口。也就是说只需要让 Git 感知到这个文件即可添加至 Git 库。接下来使用两段式将文件提交至 Git 存储区。当文件夹被加入至 Git 存储区后，进行工程相关文件开发，之后再删除无用文件即可。

## 3.9 有些文件不想放入Git中（后补）

​		对于一些程序编译的中间文件或暂存文件，不想将其放在 Git 中。因为每次只要一编译，就等于产生一个新的文件，对项目来说通常没有实质的利用价值。

​		指令如下：

​				`$ git clean -dxf`

## 3.10 这行代码是谁写的

### 3.10.1 日常开发

​		当你编译时发现某一行代码编不过，这行代码又没有写注释，真的气人。想看一看到底是谁写的。这种情况时有发生，想要知道某个文件的某一行代码是谁写的，只需要在 Git 中使用 git blame 命令帮你找出来。

### 3.10.2 精准定位，找到对应人

​		查看某一个文件所有行的 Commit 信息，指令如下：

​				`$ git blame <file_name>                # 查看file_name文件每一行的Commit信息`

​		如果文件很大，使用上述方案显然不行，查看某一文件具体某一段的 commit 信息，指令如下：

​				`$ git blame -L 5,10 <file_name>    # 查看file_name中第5-10行的commit信息`

## 3.11 不小心把文件或目录删除了

​		本节笔记内容的 rm 命令在使用时要小心，不要在状态不好的时候使用，以免造成连 Git 都挽回不了的悲剧。

### 3.11.1 日常开发

​		人有失手，马有失蹄，人总会有不小心或状态不好的时候。不管是有意还是无心，在 Git 中如果不小心把文件或目录删除了，是可以挽救回来的，这也是使用版本控制系统的主要原因之一。

### 3.11.2 解决方法

​		1st：删除文件 git.md，并查看状态，这时可以看到被删除的 git.md 文件处于 deleted 状态。

​				![image-20211121010102909](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211121010102909.png)

​		2nd：赶紧抢救，指令如下：

​				`$ git checkout <file_name>    # 抢救被删除的名为file_name的文件` 

​				`$ git checkout .         # 抢救被删除的所有文件`

​		我们看到 git.md 已经恢复，现象如下：

​				![image-20211121010529474](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211121010529474.png)

### 3.11.3 Git是怎样把文件挽救回来的

​		《火影忍者》中的忍术“秽土转生”就是 Git 挽救文件最生动的解释。上一栏提到的 git checkout 指令会把暂存区中的内容文件拿来覆盖工作目录中的内容或文件。因此在上面执行指令时就会把对应文件恢复到上一次 Commit 的状态。

​    加参数指令如下：

​				`$ git checkout HEAD~2 README                  # README恢复到距离现在两个Commit的位置`

​				`$ git checkout HEAD~2 .     # 所有文件恢复到距离现在两个Commit的位置`

## 3.12 刚才的commit后悔了，想要拆掉重做

### 3.12.1 日常开发

​		先查看 commit 记录，找到对应的commit ID，指令如下：

​				`$ git commit --oneline`

​		如果想撤销最后一次的 Commit，可以采用“相对”或“绝对”的做法。

#### 3.12.1.1 相对做法

​		根据上面打印，指令如下：

​				`$ git reset [value]^    # 撤回commit到ID为value这一版的上一版本`

​		"^"符号代表的是“前一次”，所以 value^ 是指 value 这个 commit 的前一次；如果是 value^^，则是往前两次……以此类推。但是最多加 5 个，而且通常不会写成 value^^^^^，而是 value~5。

​		value 不太好记忆，很不人性化。但是正好 HEAD 与 master 当前都是指向 value 的这个 ID，所以 value 这个 ID 即可用 HEAD 或者 master 代替。故上面指令可更换为：

​				`$ git reset HEAD^`    

​		或

​				`$ git reset master^`

#### 3.12.1.2 绝对做法

​		如果你很清楚要跳到哪个位置（Commit ID），可以直接指明，指令如下：

​				`$ git reset <Commit ID>    		# 退回到指定Commit ID指定的位置`

### 3.12.2 reset模式说明及其使用场景

​		git reset 命令可以搭配参数使用。常用的参数有3个，分别是 --mixed、--soft、以及 --hard。搭配不同的参数，执行结果会有些微差别。

#### 3.12.2.1 模式及场景说明

- mixed 模式

  ​		--mixed 是默认的参数，如果没有另外加参数，git reset 命令将使用 --mixed 模式。该模式会把暂存区的文件删除，但不会影响工作目录文件。也就是说，commit拆出来的文件会留在工作目录。

- soft 模式

  ​		这种模式下的 reset，其工作目录与暂存区的文件都不会删除，所以看起来就只有 HEAD 的移动而已。因此，commit 拆出来的文件会直接放在暂存区。

- hard 模式

  ​		在这种模式下，无论是暂存区还是工作目录的文件，都会被删除。

#### 3.12.2.2 记忆整理

- git reset的参数对工作目录及暂存区的影响

|   模式   | mixed 模式 | soft 模式 | hard 模式 |
| :------: | :--------: | :-------: | :-------: |
| 工作目录 |    不变    |   不变    |   删除    |
|  暂存区  |    删除    |   不变    |   删除    |

- git reset的参数用途

|        模式         |  mixed 模式  | soft 模式  | hard 模式 |
| :-----------------: | :----------: | :--------: | :-------: |
| commit 拆出来的文件 | 放回工作目录 | 放回暂存区 | 直接删除  |

#### 3.12.2.3 reset深度理解

​		reset 通常翻译为“重新设置”，但是在 git 中，将 reset 解释为“前往”或“变成”更为贴切，即 go to 或 become 的意思。当执行以下命令时：

​				`$ git reset HEAD~2`

​		该命令可能会被解读成“请帮我拆掉最后两次的 commit”，但其实用“拆”这个动词只是为了便于理解而已，事实上并没有真的把 commit “拆掉”。（放心，所有的 commit 都还在）准确的说，上面的这个命令应该解读成“我要前往两个 commit 之前的状态”或 “我要变成两个 commit 之前的状态”，而随着使用不同的参数模式，原本的这些文件就会移动至不同的区域。因为实际上 git reset 命令也并不是真的删除或重新设置 commit，只是“前往”到指定的 commit。那些看起来好像不见的东西只是暂时看不到了，但随时都可以再救回来。reset 是 git 中常用的命令，所以一定要树立正确的观念，才能再操作 git 时真正达到随心所欲的境界。







# 第4章 使用分支

## 4.1 使用分支的原因

### 4.1.1 引用理解

​		《火影忍者》漫画中，主角之一漩涡鸣人有一个技能，就是做出一个自己的新分身，由这个分身去执行任务或者打到敌人。如果执行任务失败了，做多也就是分身消失，再做一个分身就好了，本体不会受到影响。

### 4.1.2 git层面说明

​		在开发过程中，一路向前 commit 无任何问题，但当越来越多的人加入到同一个工程中开发的时候，commit 就不能随心所欲。此时分支就派上了用场，想要增加新的功能，或者修改 bug，就可以做一个分支来执行，在做完确认没问题之后在合并到主分支。

## 4.2 开始使用分支

```git
$ git branch
* master
```

- git branch 后不接任何参数，它仅会输出当前项目中由哪些分支。
- Git 默认会设置一个名为 master 的分支，前面的 (*) 表示现在正在这个分支上。 

### 4.2.1 新增分支

## 4.3 对分支的误解





# 第5章 修改历史记录







# 第6章 标签







# 第7章 其他常见的一些情况以及一些冷知识







# 第8章 远端共同协作—使用GitHub

## 8.1 GitHub概述

- GitHub 是一个商业网站，是当前全球最大的 Git 服务器。
- 如果要上传 Open Source 项目，可以完全免费使用。如果要在上面开设私人项目，则需要缴费，$7/月。

## 8.2 将内容Push到GitHub上

### 8.2.1 设置SSH

**注意：**

​		当使用 git 方式上传或者下载时，如果没有设置过 ssh key，则会抱错。

**设置方式：**

- 1st：设置用户名与邮箱并查看（如果设置好）

  ```git
  git config --global --list
  ```

​		![](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211124233405291.png)

- 2nd：生成密钥并找到生成文件的位置，我个人的 windows PC 为 C:\Users\zyb\.ssh

  - id_rsa 为私钥，不能泄露出去
  - id_rsa.pub 为公钥，可以放心的告诉任何人
  
  ```git
  ssh-keygen -t rsa -C "换上你的邮箱"
  ```

​		![image-20211124234447202](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211124234447202.png)

- 3rd：打开 github 主页，进入配置页

​		![image-20211124234707710](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211124234707710.png)

- 4th：进入 Settings 选择 SSH and GPG keys，将生成的 id_rsa.pub 内容拷贝至对应框中并做个 tag，指定电脑

​		![image-20211124235338763](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211124235338763.png)

### 8.2.2 Push详细步骤

#### 8.2.2.1 设置GitHub

- 1st：在 github 上创建一个新的项目。

​		<img src="https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211124230612936.png" alt="image-20211124230612936" style="zoom:67%;" />

- 2nd：填写项目名称

​		![image-20211124231553958](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211124231553958.png)

- 3rd：引导画面：注意SSH，需要提前设置密钥，看前一节笔记

​		![image-20211124232626328](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211124232626328.png)

#### 8.2.2.2 将内容推至远端 Git 服务器

**注意：**

​		如果忘记指令，根据引导画面上传项目。

- 1st：设置远端节点

  ```git
  git remote add origin git@github.com:zyb-prj/notes.git
  ```

  ![image-20211125000944535](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211125000944535.png)

  - git remote 指令主要进行与远端有关的操作。

  - add 指令时指要加入一个远端的节点。

  - origin 是一个代名词，指的是后面那串 GitHub 服务器的位置。

    - 按照惯例，远端节点默认使用 origin 这个名称。

    - 如果是从服务器上 Clone 下来的，其默认名就是 origin。

    - 这个默认名随时可以更改，例如直接改为如下指令：

      ```git
      git remote add zyb git@github.com:zyb-prj/notes.git
      ```

- 2nd：将内容推送至服务器

  ```
  git push -u origin master
  ```

  ![image-20211125001957113](https://zyb-pic.oss-cn-chengdu.aliyuncs.com/img/image-20211125001957113.png)
  
  - 把 master 分支的内容推向 origin 位置。
  
  - 在 origin 远端服务器上，如果没有 master 分支，就创建一个名为 master 的分支。
  
  - 命令中 origin 指的是远端节点，master指的是分支。比如使用下面指令用于举一反三：
  
    ```git
    git push -u zyb cat					// 将cat分支推送至zyb远端节点，并且创建一个名为cat的同名分支
    ```
  
  - 如果服务器上存在 master 分支，就会移动服务器上 master 分支的位置，使它指到当前最新的进度上。
  
  - 设置 upstream，就是 -u 参数做的事情，稍后说明
